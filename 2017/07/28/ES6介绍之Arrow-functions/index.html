<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> ES6介绍之Arrow-functions · Lucky4</title><meta name="description" content="ES6介绍之Arrow-functions - Lucky4"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Lucky4"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">ES6介绍之Arrow-functions</h1><div class="post-info">Jul 28, 2017</div><div class="post-content"><p>React中许多地方都用到了ES6的新特性，Arrow function是其中之一，这里按照MDN上的介绍，自己总结翻译了一下。</p>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Arraw function expression 比function有更简介的语法，它不绑定自己的this,arguments,super,new.target，最适合用作非方法的函数，不能够用做构造函数。</p>
<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><h3 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// 返回表达式或语句</div><div class="line">(param1, param2, …, paramN) =&gt; &#123; statements &#125;</div><div class="line">(param1, param2, …, paramN) =&gt; expression	//	简明写法</div><div class="line">(param1, param2, …, paramN) =&gt; &#123; return expression; &#125;</div><div class="line"></div><div class="line">// 只有一个参数时括号可选择使用</div><div class="line">singleParam =&gt; &#123; statements &#125;</div><div class="line"></div><div class="line">// 没有参数</div><div class="line">() =&gt; &#123; statements &#125;</div></pre></td></tr></table></figure>
<h3 id="高级语法"><a href="#高级语法" class="headerlink" title="高级语法"></a>高级语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// 返回对象字面表达式</div><div class="line">params =&gt; (&#123;foo: bar&#125;)</div><div class="line"></div><div class="line">// Rest和Default参数</div><div class="line">(param1, param2, ...rest) =&gt; &#123; statements &#125;</div><div class="line">(param1 = defaultValue1, param2, …, paramN = defaultValueN) =&gt; &#123; statements &#125;</div><div class="line"></div><div class="line">// 解构参数</div><div class="line">let f = ([a, b] = [1, 2], &#123;x: c&#125; = &#123;x: a + b&#125;) =&gt; a + b + c;</div><div class="line">f();</div></pre></td></tr></table></figure>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><h3 id="Shorter-functions"><a href="#Shorter-functions" class="headerlink" title="Shorter functions"></a>Shorter functions</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">var materials = [</div><div class="line">  &apos;Hydrogen&apos;,</div><div class="line">  &apos;Helium&apos;,</div><div class="line">  &apos;Lithium&apos;,</div><div class="line">  &apos;Beryllium&apos;</div><div class="line">];</div><div class="line"></div><div class="line">materials.map(function(material) &#123; </div><div class="line">  return material.length; </div><div class="line">&#125;); // [8, 6, 7, 9]</div><div class="line"></div><div class="line">materials.map((material) =&gt; &#123;</div><div class="line">  return material.length;</div><div class="line">&#125;); // [8, 6, 7, 9]</div><div class="line"></div><div class="line">materials.map(material =&gt; material.length); // [8, 6, 7, 9]</div></pre></td></tr></table></figure>
<h3 id="不绑定this"><a href="#不绑定this" class="headerlink" title="不绑定this"></a>不绑定this</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">var adder = &#123;</div><div class="line">  base: 1,</div><div class="line">	    </div><div class="line">  add: function(a) &#123;</div><div class="line">    var f = v =&gt; v + this.base;</div><div class="line">    return f(a);</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  addThruCall: function(a) &#123;</div><div class="line">    var f = v =&gt; v + this.base;</div><div class="line">    var b = &#123;</div><div class="line">      base: 2</div><div class="line">    &#125;;</div><div class="line">			            </div><div class="line">    return f.call(b, a);</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line">console.log(adder.add(1));         // This would log to 2</div><div class="line">console.log(adder.addThruCall(1)); // This would log to 2 still</div></pre></td></tr></table></figure>
<p>因为array function不绑定this，函数的this()或者apply()方法只能够用来传递参数，this忽略。</p>
<h3 id="不绑定arguments"><a href="#不绑定arguments" class="headerlink" title="不绑定arguments"></a>不绑定arguments</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">var arguments = 42;</div><div class="line">var arr = () =&gt; arguments;</div><div class="line"></div><div class="line">arr(); // 42</div><div class="line"></div><div class="line">function foo() &#123;</div><div class="line">  var f = (i) =&gt; arguments[0] + i; // foo&apos;s implicit arguments binding</div><div class="line">  return f(2);</div><div class="line">&#125;</div><div class="line"></div><div class="line">foo(1); // 3</div></pre></td></tr></table></figure>
<p>arguments[0]为foo的，并非f的。</p>
<h3 id="Arrow-fucntions-用作方法"><a href="#Arrow-fucntions-用作方法" class="headerlink" title="Arrow fucntions 用作方法"></a>Arrow fucntions 用作方法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&apos;use strict&apos;;</div><div class="line">var obj = &#123;</div><div class="line">  i: 10,</div><div class="line">  b: () =&gt; console.log(this.i, this),</div><div class="line">  c: function() &#123;</div><div class="line">    console.log(this.i, this);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">obj.b(); // prints undefined, Window &#123;...&#125; (or the global object)</div><div class="line">obj.c(); // prints 10, Object &#123;...&#125;</div></pre></td></tr></table></figure>
<p>用作方法的时候不能够起到方法的作用。</p>
<h3 id="用作操作符"><a href="#用作操作符" class="headerlink" title="用作操作符"></a>用作操作符</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var Foo = () =&gt; &#123;&#125;;</div><div class="line">var foo = new Foo(); // TypeError: Foo is not a constructor</div></pre></td></tr></table></figure>
<p>不能用作构造函数。</p>
<h3 id="用作prototype-property"><a href="#用作prototype-property" class="headerlink" title="用作prototype property"></a>用作prototype property</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var Foo = () =&gt; &#123;&#125;;</div><div class="line">console.log(Foo.prototype); // undefined</div></pre></td></tr></table></figure>
<p>没有prototype property。</p>
<h3 id="返回字面对象"><a href="#返回字面对象" class="headerlink" title="返回字面对象"></a>返回字面对象</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">返回字面对象时使用简明语法不会工作。</div><div class="line">var func = () =&gt; &#123; foo: 1 &#125;;               </div><div class="line">// Calling func() returns undefined!</div><div class="line"></div><div class="line">var func = () =&gt; &#123; foo: function() &#123;&#125; &#125;;   </div><div class="line">// SyntaxError: function statement requires a name</div><div class="line"></div><div class="line">这是因为在(&#123;&#125;)中的代码会被解析为连续的语句(foo会被解析为标签，而不是key)。</div><div class="line">记住要在字面对象外面加一层括号。</div><div class="line">var func = () =&gt; (&#123;foo: 1&#125;);</div></pre></td></tr></table></figure>
</div></article></div></main><footer><div class="paginator"><a href="/2017/09/26/网站前后端分离模式下国际化问题小记/" class="prev">上一篇</a><a href="/2017/06/16/Git操作小记/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2018 <a href="http://yoursite.com">Lucky4</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>