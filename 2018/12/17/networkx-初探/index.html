<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> networkx-初探 · Lucky4</title><meta name="description" content="networkx-初探 - Lucky4"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Lucky4"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">networkx-初探</h1><div class="post-info">Dec 17, 2018</div><div class="post-content"><h2 id="networkx-初探"><a href="#networkx-初探" class="headerlink" title="networkx 初探"></a>networkx 初探</h2><ul>
<li><a href="#创建一个图">创建一个图</a></li>
<li><a href="#节点">节点</a></li>
<li><a href="#边">边</a></li>
<li><a href="#访问边">访问边</a></li>
<li><a href="#添加属性">添加属性</a></li>
<li><a href="#有向图">有向图</a><br><br></li>
</ul>
<p>在撰写论文的时候经常需要画类似网络连接图，networkx 是一个常用的网络分析包，我们使用它结合 matplotlib 来完成画图任务，下面介绍 networkx 的一些基本概念。</p>
<h3 id="创建一个图"><a href="#创建一个图" class="headerlink" title="创建一个图"></a>创建一个图</h3><p>创建一个没有节点和边的图：<br><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> networkx <span class="keyword">as</span> nx</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>G=nx.Graph()</div></pre></td></tr></table></figure></p>
<p>在 networkx 中 nodes 可以是任何可哈希的对象，包括 string/image/xml/graph等。</p>
<h3 id="节点"><a href="#节点" class="headerlink" title="节点"></a>节点</h3><p>向图中添加，读取节点有多种方式。</p>
<p>常用的方式添加节点：<br><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>G.add_node(<span class="number">1</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>G.add_nodes_from([<span class="number">2</span>,<span class="number">3</span>])</div></pre></td></tr></table></figure></p>
<p>通过载入 nbunchd 可迭代对象方式添加节点:<br><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>H=nx.path_graph(<span class="number">10</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>G.add_nodes_from(H)</div></pre></td></tr></table></figure></p>
<p>将图作为节点添加：<br><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>G.add_node(H)</div></pre></td></tr></table></figure></p>
<p>删除节点：<br><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>G.remove_node(H)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>G.remove_nodes_from([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</div></pre></td></tr></table></figure></p>
<h3 id="边"><a href="#边" class="headerlink" title="边"></a>边</h3><p>向图里添加边：<br><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>G.add_edge(<span class="number">1</span>,<span class="number">2</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>e=(<span class="number">2</span>,<span class="number">3</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>G.add_edge(*e) <span class="comment"># unpack edge tuple*</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>G.add_edges_from([(<span class="number">1</span>,<span class="number">2</span>),(<span class="number">1</span>,<span class="number">3</span>)])</div></pre></td></tr></table></figure></p>
<p>通过载入 nbunchd 可迭代对象方式添加边:<br><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>G.add_edges_from(H.edges())</div></pre></td></tr></table></figure></p>
<p>删除边：<br><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>Graph.remove_edge(<span class="number">1</span>, <span class="number">2</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>Graph.remove_edges_from([(<span class="number">2</span>, <span class="number">3</span>), (<span class="number">4</span>, <span class="number">5</span>)])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>G.clear() <span class="comment"># 删除所有边</span></div></pre></td></tr></table></figure></p>
<p>查看边和节点：<br><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>G.nodes()</div><div class="line">[<span class="string">'a'</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="string">'spam'</span>, <span class="string">'m'</span>, <span class="string">'p'</span>, <span class="string">'s'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>G.edges()</div><div class="line">[(<span class="number">1</span>, <span class="number">2</span>), (<span class="number">1</span>, <span class="number">3</span>)]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>G.neighbors(<span class="number">1</span>)</div><div class="line">[<span class="number">2</span>, <span class="number">3</span>]</div></pre></td></tr></table></figure></p>
<p>查看节点和边的个数：<br><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>G.number_of_nodes()</div><div class="line"><span class="number">8</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>G.number_of_edges()</div><div class="line"><span class="number">2</span></div></pre></td></tr></table></figure></p>
<p>通过其他图的边创建图：<br><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>H=nx.DiGraph(G)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>H.edges()</div><div class="line">[(<span class="number">1</span>, <span class="number">2</span>), (<span class="number">2</span>, <span class="number">1</span>)]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>edgelist=[(<span class="number">0</span>,<span class="number">1</span>),(<span class="number">1</span>,<span class="number">2</span>),(<span class="number">2</span>,<span class="number">3</span>)]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>H=nx.Graph(edgelist)</div></pre></td></tr></table></figure></p>
<h3 id="访问边"><a href="#访问边" class="headerlink" title="访问边"></a>访问边</h3><p>访问邻边：<br><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>G[<span class="number">1</span>]</div><div class="line">&#123;<span class="number">2</span>: &#123;&#125;&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>G[<span class="number">1</span>][<span class="number">2</span>]</div><div class="line">&#123;&#125;</div></pre></td></tr></table></figure></p>
<p>设置边属性:<br><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>G.add_edge(<span class="number">1</span>,<span class="number">3</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>G[<span class="number">1</span>][<span class="number">3</span>][<span class="string">'color'</span>]=<span class="string">'blue'</span></div></pre></td></tr></table></figure></p>
<h3 id="添加属性"><a href="#添加属性" class="headerlink" title="添加属性"></a>添加属性</h3><p>为图添加属性：<br><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>G = nx.Graph(day=<span class="string">"Friday"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>G.graph</div><div class="line">&#123;<span class="string">'day'</span>: <span class="string">'Friday'</span>&#125;</div></pre></td></tr></table></figure></p>
<p>为节点添加属性：<br><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>G.add_node(<span class="number">1</span>, time=<span class="string">'5pm'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>G.add_nodes_from([<span class="number">3</span>], time=<span class="string">'2pm'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>G.node[<span class="number">1</span>]</div><div class="line">&#123;<span class="string">'time'</span>: <span class="string">'5pm'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>G.node[<span class="number">1</span>][<span class="string">'room'</span>] = <span class="number">714</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>G.nodes(data=<span class="keyword">True</span>)</div><div class="line">[(<span class="number">1</span>, &#123;<span class="string">'room'</span>: <span class="number">714</span>, <span class="string">'time'</span>: <span class="string">'5pm'</span>&#125;), (<span class="number">3</span>, &#123;<span class="string">'time'</span>: <span class="string">'2pm'</span>&#125;)]</div></pre></td></tr></table></figure></p>
<p>为边添加属性：<br><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>G.add_edge(<span class="number">1</span>, <span class="number">2</span>, weight=<span class="number">4.7</span> )</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>G.add_edges_from([(<span class="number">3</span>,<span class="number">4</span>),(<span class="number">4</span>,<span class="number">5</span>)], color=<span class="string">'red'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>G.add_edges_from([(<span class="number">1</span>,<span class="number">2</span>,&#123;<span class="string">'color'</span>:<span class="string">'blue'</span>&#125;), (<span class="number">2</span>,<span class="number">3</span>,&#123;<span class="string">'weight'</span>:<span class="number">8</span>&#125;)])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>G[<span class="number">1</span>][<span class="number">2</span>][<span class="string">'weight'</span>] = <span class="number">4.7</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>G.edge[<span class="number">1</span>][<span class="number">2</span>][<span class="string">'weight'</span>] = <span class="number">4</span></div></pre></td></tr></table></figure></p>
<h3 id="有向图"><a href="#有向图" class="headerlink" title="有向图"></a>有向图</h3><p>networkx 提供了查看出度、入度、邻接节点等方法处理有向图。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>DG=nx.DiGraph()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>DG.add_weighted_edges_from([(<span class="number">1</span>,<span class="number">2</span>,<span class="number">0.5</span>), (<span class="number">3</span>,<span class="number">1</span>,<span class="number">0.75</span>)]) <span class="comment">#构建有向图</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>DG.out_degree(<span class="number">1</span>,weight=<span class="string">'weight'</span>) <span class="comment"># 查看出度</span></div><div class="line"><span class="number">0.5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>DG.degree(<span class="number">1</span>,weight=<span class="string">'weight'</span>) <span class="comment"># 查看出度入度之和</span></div><div class="line"><span class="number">1.25</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>DG.successors(<span class="number">1</span>) <span class="comment"># 查看临界节点</span></div><div class="line">[<span class="number">2</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>DG.neighbors(<span class="number">1</span>)</div><div class="line">[<span class="number">2</span>]</div></pre></td></tr></table></figure></p>
<p>参考：<a href="https://networkx.github.io/documentation/stable/tutorial.html#" target="_blank" rel="external">networkx 官方文档</a></p>
</div></article></div></main><footer><div class="paginator"><a href="/2020/04/13/绩效反思/" class="prev">PREV</a><a href="/2018/11/28/Pro-Git-阅读笔记/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2020 <a href="http://yoursite.com">Lucky4</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>